# ===================================
# P3 Protocol - Environment Variables
# Production Environment Setup Guide
# ===================================

# ==================
# NODE ENVIRONMENT
# ==================
# Set to 'production' for production deployment, 'development' for local development
NODE_ENV=production

# Server port (default: 5000)
PORT=5000

# ==================
# DATABASE
# ==================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database?sslmode=require
# 
# How to get:
# - For local development: Use local PostgreSQL instance
# - For production: Use managed PostgreSQL service (e.g., Neon, AWS RDS, Supabase)
# - Required for all production deployments
# 
# Example: postgresql://user:pass@localhost:5432/p3protocol?sslmode=require
DATABASE_URL=

# Test database URL (only for E2E testing)
# TEST_DATABASE_URL=postgresql://user:pass@localhost:5432/p3protocol_test

# ==================
# BLOCKCHAIN - BASE NETWORK
# ==================
# RPC endpoint for Base Mainnet
# Default: https://mainnet.base.org
# 
# How to get:
# - Use public RPC: https://mainnet.base.org (free, rate-limited)
# - Use Alchemy: https://base-mainnet.g.alchemy.com/v2/YOUR-API-KEY
# - Use QuickNode: https://your-endpoint.base.quiknode.pro/YOUR-TOKEN/
# - Use Infura: https://base-mainnet.infura.io/v3/YOUR-PROJECT-ID
BASE_RPC_URL=https://mainnet.base.org

# RPC endpoint for Base Sepolia Testnet
# Default: https://sepolia.base.org
# 
# How to get: Same providers as mainnet, use testnet endpoints
BASE_SEPOLIA_RPC_URL=https://sepolia.base.org

# RPC endpoint for Base Goerli Testnet (deprecated, for reference)
# BASE_GOERLI_RPC_URL=https://goerli.base.org

# ==================
# BLOCKCHAIN - PRIVATE KEY
# ==================
# Private key for blockchain transaction signing (64 hex characters, without 0x prefix)
# 
# SECURITY WARNING: NEVER commit this to version control!
# 
# How to get:
# 1. Create a new wallet using MetaMask, Trust Wallet, or other wallet
# 2. Export the private key (Settings > Security & Privacy > Reveal Private Key)
# 3. Remove the '0x' prefix if present
# 
# IMPORTANT: This wallet needs:
# - ETH on Base Mainnet for gas fees (for production)
# - ETH on Base Sepolia for gas fees (for testnet)
# - Sufficient balance to deploy contracts and execute transactions
PRIVATE_KEY=

# Bridge private key (for cross-chain operations)
# Required if using bridge functionality to Optimism, Arbitrum, or Polygon
# BRIDGE_PRIVATE_KEY=

# Sequencer private key (for rollup operations)
# Required if running a rollup sequencer
# SEQUENCER_PRIVATE_KEY=

# ==================
# DEPLOYED CONTRACT ADDRESSES
# ==================
# These addresses are obtained after running the deployment script (scripts/deploy.ts)
# Run: npx hardhat run scripts/deploy.ts --network baseSepolia
# The script will output all contract addresses and save them to deployment-{timestamp}.json
#
# For mainnet deployment, run: npx hardhat run scripts/deploy.ts --network base

# Governor contract address (DAO governance)
GOVERNOR_ADDRESS=

# Governance token contract address (voting token)
TOKEN_ADDRESS=

# Timelock controller contract address (DAO proposal execution delay)
TIMELOCK_ADDRESS=

# Anchor registry contract address (blockchain data anchoring)
ANCHOR_REGISTRY_ADDRESS=

# Consent registry contract address (privacy consent management)
CONSENT_REGISTRY_ADDRESS=

# Receipt bound token contract address (soulbound receipts)
RECEIPT_BOUND_TOKEN_ADDRESS=

# Trust policy router contract address (trust layer routing)
TRUST_POLICY_ROUTER_ADDRESS=

# Treasury contract address (DAO treasury)
TREASURY_ADDRESS=

# ZK receipts verifier contract address (zero-knowledge proofs)
ZK_RECEIPTS_VERIFIER_ADDRESS=

# Checkpoint registry contract address (rollup checkpoints)
# CHECKPOINT_REGISTRY_ADDRESS=

# Network-specific contract addresses for testnet
# GOVERNOR_SEPOLIA_ADDRESS=
# TOKEN_SEPOLIA_ADDRESS=
# ANCHOR_REGISTRY_SEPOLIA_ADDRESS=

# ==================
# IPFS / PINATA
# ==================
# Pinata JWT token for IPFS file storage
# 
# How to get:
# 1. Sign up at https://www.pinata.cloud/
# 2. Go to API Keys section
# 3. Create a new API key with admin permissions
# 4. Copy the JWT token (starts with "eyJ...")
# 
# Required for: File uploads, video storage, decentralized content storage
PINATA_JWT=

# Custom Pinata gateway URL (optional)
# Default: Uses public Pinata gateway (gateway.pinata.cloud)
# 
# How to get:
# 1. Subscribe to Pinata's Dedicated Gateway plan
# 2. Configure your custom gateway domain
# 3. Use format: https://your-gateway.mypinata.cloud
# PINATA_GATEWAY=

# ==================
# BLOCKCHAIN EXPLORER API
# ==================
# BaseScan API key for contract verification and blockchain data
# 
# How to get:
# 1. Go to https://basescan.org/
# 2. Sign up for an account
# 3. Go to API-KEYs section
# 4. Create a new API key
# 
# Used for: Contract verification, transaction tracking, gas estimates
# BASESCAN_API_KEY=

# ==================
# WEBRTC / TURN SERVER
# ==================
# TURN server credentials for peer-to-peer voice/video calls
# 
# How to get:
# Option 1: Use a managed TURN service
#   - Twilio TURN: https://www.twilio.com/stun-turn
#   - Xirsys: https://xirsys.com/
#   - Metered: https://www.metered.ca/
# 
# Option 2: Self-host coturn server
#   - Install coturn on your server
#   - Configure static credentials
# 
# Required for: Voice calls, video conferencing
TURN_USERNAME=guest
TURN_CREDENTIAL=guest

# Full TURN server URL (optional, for custom TURN server)
# TURN_SERVER=turn:your-turn-server.com:3478

# ==================
# WALLETCONNECT (Required for wallet connections)
# ==================
# Get your project IDs from: https://cloud.walletconnect.com/
# 
# How to get:
# 1. Sign up at https://cloud.walletconnect.com/
# 2. Create a new project
# 3. Copy the Project ID
VITE_WALLETCONNECT_PROJECT_ID=your-walletconnect-project-id
VITE_P3_WALLETCONNECT_PROJECT_ID=your-p3-walletconnect-project-id

# ==================
# ADMIN WALLET (Required)
# ==================
# Wallet address with admin privileges for moderation, analytics, and governance
# Format: 0x followed by 40 hex characters
# 
# This wallet will have:
# - Access to admin analytics and metrics
# - Moderation privileges
# - Governance admin rights
ADMIN_WALLET=0xYourAdminWalletAddress

# ==================
# ADMIN CREDENTIALS
# ==================
# Admin account credentials for initial system setup
# 
# These credentials are used to create the first admin user on system startup
# After initial setup, you can create additional users through the admin panel
# 
# SECURITY: Change these immediately after first login!
ADMIN_EMAIL=admin@p3protocol.local
ADMIN_PASSWORD=

# ==================
# SECURITY & AUTHENTICATION
# ==================
# JWT secret for authentication token signing
# 
# How to generate: Use a cryptographically secure random string
# Example: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# 
# SECURITY WARNING: Keep this secret! Never commit to version control!
JWT_SECRET=your-secret-key-change-in-production

# Master encryption key for secrets vault
# How to generate: Same as JWT_SECRET
# MASTER_KEY=

# Webhook encryption key (for webhook signature validation)
# WEBHOOK_ENCRYPTION_KEY=

# Telemetry salt (for privacy-preserving analytics)
TELEMETRY_SALT=your-telemetry-salt

# IP hashing salt (for privacy-preserving IP tracking)
IP_SALT=your-ip-hashing-salt

# ==================
# ROLLUP CONFIGURATION
# ==================
# Layer 2 RPC URL (for rollup operations)
# L2_RPC_URL=http://localhost:8545

# Layer 1 RPC URL (for rollup settlement)
# L1_RPC_URL=https://mainnet.base.org

# RPC URL for rollup operations
# RPC_URL=

# State database path for rollup
# STATE_DB_PATH=./data/rollup-state

# ==================
# CROSS-CHAIN BRIDGE
# ==================
# RPC endpoints for bridging to other chains
# OPTIMISM_RPC_URL=https://mainnet.optimism.io
# ARBITRUM_RPC_URL=https://arb1.arbitrum.io/rpc
# POLYGON_RPC_URL=https://polygon-rpc.com

# Bridge contract addresses
# BASE_OPTIMISM_BRIDGE_ADDRESS=
# BASE_ARBITRUM_BRIDGE_ADDRESS=
# BASE_POLYGON_BRIDGE_ADDRESS=

# ==================
# SCALING FLAGS
# ==================
# Production scaling feature flags
# These default to true in production (NODE_ENV=production), false in development
# Override explicitly with '1'/'true' to enable, '0'/'false' to disable

# Enable Redis cluster mode for horizontal scaling
# When true, uses REDIS_CLUSTER_NODES for cluster connection
# When false, uses single REDIS_URL connection
FLAG_REDIS_CLUSTER=true

# Enable WebSocket sharding for distributed connections
# When true, WebSocket connections are distributed across WS_SHARD_COUNT shards (default: 8)
# When false, all connections use a single shard
FLAG_WS_SHARDS=true

# Redis cluster nodes (comma-separated host:port pairs)
# Only used when FLAG_REDIS_CLUSTER=true
# Example: redis1.example.com:6379,redis2.example.com:6379,redis3.example.com:6379
REDIS_CLUSTER_NODES=

# Number of WebSocket shards (only used when FLAG_WS_SHARDS=true)
# Default: 8
WS_SHARD_COUNT=8

# Anchor queue configuration
ANCHOR_QUEUE_NAME=anchorQueue
ANCHOR_MAX_BATCH=500

# ==================
# FEATURE FLAGS
# ==================
# Enable/disable experimental features
# Set to 'true' to enable, 'false' or omit to disable

# Post-quantum cryptography (experimental)
ENABLE_PQ=false

# Decentralized identity and verifiable credentials
ENABLE_DID_VC=true

# Zero-knowledge messaging (experimental)
ENABLE_ZK_MSG=false

# Programmable governance features
ENABLE_PROGRAMMABLE_GOV=true

# Privacy-preserving analytics
ENABLE_PRIVACY_ANALYTICS=true

# Modular data availability layer
ENABLE_MODULAR_DA=true

# ==================
# MONITORING & ALERTING
# ==================
# Slack webhook URL for alerts
# 
# How to get:
# 1. Go to https://api.slack.com/apps
# 2. Create a new app or select existing
# 3. Enable Incoming Webhooks
# 4. Add webhook to workspace
# 5. Copy the webhook URL
# SLACK_WEBHOOK_URL=

# PagerDuty routing key for critical alerts
# 
# How to get:
# 1. Go to https://www.pagerduty.com/
# 2. Navigate to Services > Service Directory
# 3. Select or create a service
# 4. Go to Integrations > Add Integration
# 5. Select "Events API v2"
# 6. Copy the Integration Key
# PAGERDUTY_ROUTING_KEY=

# ==================
# LOGGING
# ==================
# Log level: debug, info, warn, error
# Production recommended: info or warn
LOG_LEVEL=info

# ==================
# DEPLOYMENT SPECIFIC
# ==================
# Network name for contract deployment
# Options: mainnet, baseSepolia, baseGoerli
NETWORK=mainnet

# Skip Vite dev server (for production deployment)
# Set to 'true' when deploying to production to skip frontend dev server
# SKIP_VITE=true

# Replit environment detection (auto-set by Replit)
# REPLIT=

# Base URL for E2E tests
# BASE_URL=http://localhost:5001

# CI environment detection
# CI=

# ==================
# PACKAGE VERSION
# ==================
# Automatically set by npm, used for version tracking
# npm_package_version=

# ===================================
# QUICK START GUIDE
# ===================================
#
# MINIMUM REQUIRED FOR LOCAL DEVELOPMENT:
# 1. DATABASE_URL - PostgreSQL connection string
# 2. ADMIN_EMAIL - Your admin email
# 3. ADMIN_PASSWORD - Secure admin password
# 4. JWT_SECRET - Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
# MINIMUM REQUIRED FOR PRODUCTION:
# All of the above, plus:
# 5. BASE_RPC_URL - RPC endpoint for Base network
# 6. PRIVATE_KEY - Wallet private key for blockchain transactions
# 7. All contract addresses (deploy contracts first using scripts/deploy.ts)
# 8. PINATA_JWT - For IPFS file storage
# 9. NODE_ENV=production
#
# OPTIONAL BUT RECOMMENDED:
# - TURN_USERNAME, TURN_CREDENTIAL - For voice/video calls
# - BASESCAN_API_KEY - For contract verification
# - SLACK_WEBHOOK_URL - For monitoring alerts
# - LOG_LEVEL=info or warn
#
# DEPLOYMENT STEPS:
# 1. Copy this file to .env
# 2. Fill in all required variables
# 3. Deploy smart contracts: npx hardhat run scripts/deploy.ts --network baseSepolia
# 4. Copy contract addresses from deployment output to .env
# 5. Run database migrations: npm run migrate
# 6. Start application: npm start
# 7. Access admin panel and configure additional settings
#
# SECURITY CHECKLIST:
# [ ] .env is added to .gitignore
# [ ] All secrets are unique and randomly generated
# [ ] Database uses SSL/TLS connection
# [ ] Private keys are backed up securely offline
# [ ] Admin password is strong (16+ characters)
# [ ] JWT_SECRET is at least 64 characters
# [ ] Environment variables are set in hosting platform (not hardcoded)
# [ ] Monitoring and alerting is configured
#
# ===================================
